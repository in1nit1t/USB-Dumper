# USB-Dumper

USB Dumper 的 C++ GUI 实现，原理分析在 <a href="https://in1nit1t.github.io/2020/10/11/%E6%B7%B1%E5%85%A5%E5%89%96%E6%9E%90USB-Dumper%E5%8E%9F%E7%90%86/">博客</a> 中

只是把框架搭建了起来，且只实现了插入U盘即将文件拷贝至 C:\USB 目录的功能（不用 GUI 框架的桌面开发令人抓狂，我也不知道我怎么想的）

这是一个 Visual Studio 2019 生成的工程，下载后运行 USB_Dumper.sln 即可在 VS 中打开，需要在项目属性的 C++ 预处理器定义中添加 _CRT_SECURE_NO_WARNINGS

如果使用其他 IDE，则需要根据 USB_Dumper 目录下的源码进行新工程的构建

当然 Release 目录下已经有一个生成好的 exe 了，可以直接运行，退出得在任务管理器中结束进程



#### 改进思考

1. 可以考虑在设备移除时判断移除的是否为之前插入的设备，如果是，则将 C:\USB 目录下的文件通过网络发送给攻击者（具体实现起来还可以对 C:\USB 的目录结构进行管理，防止反复发送重复数据，增加指定文件后缀传输功能也是不错的）
2. 该进程仍然可以在任务管理器中被发现，可以考虑 hook Win API 来隐藏 USB Dumper 进程
3. C:\USB 目录太过明显，可以考虑生成随机字符串作为目录名，并将该目录藏得越深越好
4. 定期删除备份目录下的文件（成功发送给攻击者的那部分），并根据磁盘剩余容量情况动态更改备份目录路径


PS. 仅供学习交流使用，USE AT YOUR OWN RISK
